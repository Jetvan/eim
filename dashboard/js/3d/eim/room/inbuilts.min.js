demo.Default.setEnvmap("envmap1",["../room/images/room.jpg","../room/images/room.jpg","../room/images/room.jpg","../room/images/room.jpg","../room/images/room.jpg","../room/images/room.jpg"]),demo.Default.registerCreator("rack",function(e,t){var a=t.lazy||!0,o=t.translate||[0,0,0],m=o[0],r=o[1],i=o[2],n=t.width||60,p=t.height||200,l=t.depth||80,g=t.severity,s=new mono.Cube(n,p,l);s.s({"m.color":"#557E7A","left.m.lightmap.image":"../room/images/outside_lightmap.png","right.m.lightmap.image":"../room/images/outside_lightmap.png","front.m.lightmap.image":"../room/images/outside_lightmap.png","back.m.lightmap.image":"../room/images/outside_lightmap.png","top.m.normalmap.image":"../room/images/metal_normalmap.jpg","left.m.normalmap.image":"../room/images/metal_normalmap.jpg","right.m.normalmap.image":"../room/images/metal_normalmap.jpg","back.m.normalmap.image":"../room/images/metal_normalmap.jpg","top.m.specularmap.image":"../room/images/outside_lightmap.png","left.m.specularmap.image":"../room/images/outside_lightmap.png","right.m.specularmap.image":"../room/images/outside_lightmap.png","back.m.specularmap.image":"../room/images/outside_lightmap.png","top.m.envmap.image":demo.Default.getEnvmap("envmap1"),"left.m.envmap.image":demo.Default.getEnvmap("envmap1"),"right.m.envmap.image":demo.Default.getEnvmap("envmap1"),"back.m.envmap.image":demo.Default.getEnvmap("envmap1"),"m.ambient":"#557E7A","m.type":"phong","m.specularStrength":50,"front.m.texture.image":"../room/images/rack.png","front.m.texture.repeat":new mono.Vec2(1,1),"front.m.specularmap.image":"../room/images/white.png","front.m.color":"white","front.m.ambient":"white","front.m.specularStrength":200,"front.m.envmap.image":demo.Default.getEnvmap("envmap1")}),s.setPosition(m,p/2+1+r,i);var h=function(e,t,a,o,m,r,i,n,p,l){var g=p,s=new mono.Cube(.75*m,r-10,.7*i);s.s({"m.color":"#333333","m.ambient":"#333333","m.lightmap.image":"../room/images/inside_lightmap.png","bottom.m.texture.repeat":new mono.Vec2(2,2),"left.m.texture.image":"../room/images/rack_panel.png","right.m.texture.image":"../room/images/rack_panel.png","back.m.texture.image":"../room/images/rack_panel.png","back.m.texture.repeat":new mono.Vec2(1,1),"top.m.lightmap.image":"../room/images/floor.png"}),s.setPosition(t+.5,s.getHeight()/2+2+a,o+g.getDepth()/2-s.getDepth()/2+1),e.remove(p);var h=new mono.ComboNode([p,s],["-"]);if(e.add(h),n){var d=new mono.Alarm(h.getId(),h.getId(),n);h.setStyle("alarm.billboard.vertical",!0),e.getAlarmBox().add(d)}demo.Default.loadRackContent(e,t,a,o,m,r,i,n,p,s,l)};if(a){if(g){var d=new mono.Alarm(s.getId(),s.getId(),g);s.setStyle("alarm.billboard.vertical",!0),e.getAlarmBox().add(d)}e.add(s);var u=function(){h(e,m,r,i,n,p,l,g,s,t)};s.setStyle("lazy.function",u)}else h(e,m,r,i,n,p,l,g,s,t)}),demo.Default.registerCreator("electric",function(e,t){var a=t.translate||[0,0,0],o=a[0],m=a[1],r=a[2],i=t.width||60,n=t.height||200,p=t.depth||80,l=new mono.Cube(i,n,p);l.s({"left.m.lightmap.image":"../room/images/outside_lightmap.png","right.m.lightmap.image":"../room/images/outside_lightmap.png","front.m.lightmap.image":"../room/images/outside_lightmap.png","back.m.lightmap.image":"../room/images/outside_lightmap.png","top.m.normalmap.image":"../room/images/metal_normalmap.jpg","left.m.normalmap.image":"../room/images/metal_normalmap.jpg","right.m.normalmap.image":"../room/images/metal_normalmap.jpg","back.m.normalmap.image":"../room/images/metal_normalmap.jpg","m.specularmap.image":"../room/images/outside_lightmap.png","top.m.envmap.image":demo.Default.getEnvmap("envmap1"),"left.m.envmap.image":demo.Default.getEnvmap("envmap1"),"right.m.envmap.image":demo.Default.getEnvmap("envmap1"),"back.m.envmap.image":demo.Default.getEnvmap("envmap1"),"m.color":"#F0F0F0","m.ambient":"#F0F0F0","m.type":"phong","m.specularStrength":50,"front.m.texture.image":"../room/images/electric.jpg","front.m.texture.repeat":new mono.Vec2(1,1),"front.m.specularmap.image":"../room/images/white.png","front.m.color":"white","front.m.ambient":"white","front.m.specularStrength":200}),l.setPosition(o,n/2+1+m,r),e.add(l)}),demo.Default.registerCreator("plant",function(e,t){var a=t.scale||[2,2,2],o=(a[0],a[1],a[2],t.delay||!0),m=t.translate||[0,0,0],r=(m[0],m[1],m[2],function(t,a,o,m,r,i){var n=((new Date).getTime(),demo.Default.createPlant(t,a,o,m,r,i));e.add(n);(new Date).getTime()});if(o){var i=function(e,t,a,o,m,i){return function(){r(e,t,a,o,m,i)}};setTimeout(i(m[0],m[1],m[2],a[0],a[1],a[2]),demo.Default.getRandomLazyTime())}else r(m[0],m[1],m[2],a[0],a[1],a[2])}),demo.Default.registerCreator("tree",function(e,t){var a=t.scale||[2,2,2],o=(a[0],a[1],a[2],t.delay||!0),m=t.translate||[0,0,0],r=(m[0],m[1],m[2],function(t,a,o,m,r,i){var n=((new Date).getTime(),demo.Default.createTree(t,a,o,m,r,i));e.add(n);(new Date).getTime()});if(o){var i=function(e,t,a,o,m,i){return function(){r(e,t,a,o,m,i)}};setTimeout(i(m[0],m[1],m[2],a[0],a[1],a[2]),demo.Default.getRandomLazyTime())}else r(m[0],m[1],m[2],a[0],a[1],a[2])}),demo.Default.registerFilter("floor",function(e,t){var a=t.width||1e3,o=t.depth||1e3;return{type:"cube",width:a,height:10,depth:o,translate:[0,-10,0],shadowHost:!0,op:"+",style:{"m.type":"phong","m.color":"#BEC9BE","m.ambient":"#BEC9BE","top.m.type":"basic","top.m.texture.image":"../room/images/floor.png","top.m.texture.repeat":new mono.Vec2(a/100,o/100),"top.m.color":"#DAF0F5","top.m.polygonOffset":!0,"top.m.polygonOffsetFactor":3,"top.m.polygonOffsetUnits":3}}}),demo.Default.registerFilter("floor_cut",function(e,t){return{type:"cube",width:100,height:100,depth:100,op:"-",style:{"m.texture.image":"../room/images/floor.png","m.texture.repeat":new mono.Vec2(4,4),"m.color":"#DAF0F5","m.lightmap.image":"../room/images/outside_lightmap.png","m.polygonOffset":!0,"m.polygonOffsetFactor":3,"m.polygonOffsetUnits":3}}}),demo.Default.registerFilter("floor_box",function(e,t){return{type:"cube",width:100,height:100,depth:100,floorShadow:!0,sideColor:"#C3D5EE",topColor:"#D6E4EC"}}),demo.Default.registerFilter("plants",function(e,t){var a=[],o=t.translates;if(o)for(var m=0;m<o.length;m++){var r=o[m],i={type:"plant",floorShadow:!1,scale:[2,2,2],translate:r};demo.Default.copyProperties(t,i,["type","translates","translate"]),a.push(i)}return a}),demo.Default.registerFilter("trees",function(e,t){var a=[],o=t.translates;if(o)for(var m=0;m<o.length;m++){var r=o[m],i={type:"tree",floorShadow:!0,scale:[2,2,2],translate:r};demo.Default.copyProperties(t,i,["type","translates","translate"]),a.push(i)}return a}),demo.Default.registerFilter("electrics",function(e,t){var a=[],o=t.translates;if(o)for(var m=0;m<o.length;m++){var r=o[m],i={type:"electric",floorShadow:!0,translate:r};demo.Default.copyProperties(t,i,["type","translates","translate"]),a.push(i)}return a}),demo.Default.registerFilter("racks",function(e,t){var a=[],o=t.translates,m=t.severities||[];if(o)for(var r=0;r<o.length;r++){var i=o[r],n=m[r],p={type:"rack",floorShadow:!0,translate:i,severity:n};demo.Default.copyProperties(t,p,["type","translates","translate","severities"]),a.push(p)}return a}),demo.Default.registerFilter("wall",function(e,t){var a=[],o={type:"path",op:"+",width:t.width||20,height:t.height||200,floorShadow:!0,insideColor:t.insideColor||"#B8CAD5",outsideColor:t.outsideColor||"#A5BDDD",asideColor:t.asideColor||"#D6E4EC",zsideColor:t.zsideColor||"#D6E4EC",topColor:"#D6E4EC",bottomColor:t.bottomColor||"red",insideImage:t.insideImage,outsideImage:t.outsideImage,repeat:t.repeat,translate:t.translate,data:t.data};if(a.push(o),t.children){var m=demo.Default.filterJson(e,t.children);a=a.concat(m)}for(var r=[],i=[],n=0;n<a.length;n++){var p=a[n];p.op?r.push(p):i.push(p)}var l=demo.Default.createCombo(r);return t.style&&l.s(t.style),e.add(l),o.shadowGhost=!0,i.push(o),i}),demo.Default.registerFilter("window",function(e,t){var a=t.translate||[0,0,0],o=a[0],m=a[1],r=a[2],i=t.width||100,n=t.height||100,p=t.depth||50,l=t.glassDepth||4,g=5,s=45,h=10,d=t.platform,u={type:"cube",width:i,height:n,depth:p,translate:[o,m,r],op:"-",sideColor:"#B8CAD5",topColor:"#D6E4EC"},c={type:"cube",width:i-.5,height:n-.5,depth:l,translate:[o,m,r],op:"+",style:{"m.color":"#F0F0F0","m.ambient":"#F0F0F0","m.type":"phong","m.specularStrength":.1,"m.envmap.image":demo.Default.getEnvmap("envmap1"),"m.specularmap.image":"../room/images/rack_inside_normal.jpg","m.texture.repeat":new mono.Vec2(10,5),"front.m.transparent":!0,"front.m.opacity":.4,"back.m.transparent":!0,"back.m.opacity":.4}};t.picture&&(c.style["m.texture.image"]=t.picture,c.style["m.texture.repeat"]=new mono.Vec2(1,1),c.style["m.specularmap.image"]=null,c.style["front.m.opacity"]=1,c.style["back.m.opacity"]=1);var f=[u,c];return d&&f.push({type:"cube",width:i,height:g,depth:s,translate:[o,m,r+h],op:"+",sideColor:"#A5BDDD",topColor:"#D6E4EC"}),f}),demo.Default.registerCreator("tv",function(e,t){var a=t.translate||[0,0,0],o=a[0],m=a[1],r=a[2],i=4,n=2,p=t.picture||"../room/images/screen.jpg",l=t.rotate||[0,0,0],g=[{type:"cube",width:150,height:80,depth:5,translate:[o,m,r],rotate:l,op:"+",style:{"m.type":"phong","m.color":"#2D2F31","m.ambient":"#2D2F31","m.normalmap.image":"../room/images/metal_normalmap.jpg","m.texture.repeat":new mono.Vec2(10,6),"m.specularStrength":100}},{type:"cube",width:130,height:75,depth:5,translate:[o,m+n,r+i],rotate:l,op:"-",style:{"m.type":"phong","m.color":"#2D2F31","m.ambient":"#2D2F31","m.normalmap.image":"../room/images/metal_normalmap.jpg","m.texture.repeat":new mono.Vec2(10,6),"m.specularStrength":100}},{type:"cube",width:130,height:75,depth:1,translate:[o,m+n,r+1.6],rotate:l,op:"+",style:{"m.type":"phong","m.specularStrength":200,"front.m.texture.image":p}}],s=demo.Default.createCombo(g);e.add(s)}),demo.Default.registerFilter("door",function(e,t){var a=t.translate||[0,0,0],o=a[0],m=a[1],r=a[2],i=t.width||205,n=t.height||180,p=t.depth||26,l=10,g=2;return[{type:"cube",width:i,height:n,depth:p,translate:[o,m,r],op:"+",sideColor:"#C3D5EE",topColor:"#D6E4EC"},{type:"cube",width:i-l,height:n-l/2-g,depth:p+2,op:"-",translate:[o,m+g,r],sideColor:"#B8CAD5",topColor:"#D6E4EC"},{type:"cube",width:(i-l)/2-2,height:n-l/2-g-2,depth:2,translate:[o-(i-l)/4,g+1,r],sideColor:"orange",topColor:"orange",style:{"m.type":"phong","m.transparent":!0,"front.m.texture.image":"../room/images/door_left.png","back.m.texture.image":"../room/images/door_right.png","m.specularStrength":100,"m.envmap.image":demo.Default.getEnvmap("envmap1"),"m.specularmap.image":"../room/images/white.png"},client:{animation:"rotate.left.-90"}},{type:"cube",width:(i-l)/2-2,height:n-l/2-g-2,depth:2,translate:[o+(i-l)/4,g+1,r],sideColor:"orange",topColor:"orange",style:{"m.type":"phong","m.transparent":!0,"front.m.texture.image":"../room/images/door_right.png","back.m.texture.image":"../room/images/door_left.png","m.specularStrength":100,"m.envmap.image":demo.Default.getEnvmap("envmap1"),"m.specularmap.image":"../room/images/white.png"},client:{animation:"rotate.right.90"}}]}),demo.Default.registerFilter("glass_wall",function(e,t){var a=t.translate||[0,0,0],o=a[0],m=a[1],r=a[2],i=t.width||100,n=t.height||200,p=t.depth||20,l=.6*n,g=t.rotate||[0,0,0],s=[{type:"cube",width:i,height:n,depth:p,floorShadow:!0,translate:[o,m,r],rotate:g,op:"+",sideColor:"#A5BDDD",topColor:"#D6E4EC"},{type:"cube",width:i+2,height:l,depth:p+2,translate:[o,(n-l)/3*2,r],rotate:g,op:"-",sideColor:"#A5BDDD",topColor:"#D6E4EC"},{type:"cube",width:i,height:l,depth:4,translate:[o,(n-l)/3*2,r],rotate:g,op:"+",sideColor:"#58ACFA",topColor:"#D6E4EC",style:{"m.transparent":!0,"m.opacity":.6,"m.color":"#01A9DB","m.ambient":"#01A9DB","m.type":"phong","m.specularStrength":100,"m.envmap.image":demo.Default.getEnvmap("envmap1"),"m.specularmap.image":"../room/images/rack_inside_normal.jpg","m.texture.repeat":new mono.Vec2(30,5)}}],h=demo.Default.createCombo(s);e.add(h);var d=s[0];return d.shadowGhost=!0,[d]}),demo.Default.registerCreator("room_field",function(e,t){for(var a,o=t.translate||[0,0,0],m=o[0],r=o[1],i=o[2],n=t.height||200,p=t.rotate||[0,0,0],l=t.data,g=0;g<l.length;g++){var s=l[g];a?a.lineTo(s[0],s[1],0):(a=new mono.Path,a.moveTo(s[0],s[1],0))}var h=demo.Default.createShapeNode(a,n,m,r,i);h.s({"m.color":"#7D7D7D","m.ambient":"#7D7D7D","m.texture.repeat":new mono.Vec2(2,2),"m.texture.image":"../room/images/bg-wall.jpg"}),h.setRotation(p[0],p[1],p[2]),e.add(h)});